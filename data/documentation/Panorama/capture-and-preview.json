{"metadata":{"modules":[{"name":"Panorama"}],"role":"article","roleHeading":"Article","title":"Capture and preview"},"variants":[{"paths":["\/documentation\/panorama\/capture-and-preview"],"traits":[{"interfaceLanguage":"swift"}]}],"primaryContentSections":[{"kind":"content","content":[{"level":2,"text":"Capture","anchor":"Capture","type":"heading"},{"inlineContent":[{"type":"text","text":"The "},{"code":"PanoramaCaptureView","type":"codeVoice"},{"type":"text","text":" will start capture automatically:"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["class PanoramaCaptureVC: UIViewController {","","  \/\/ Currently we only support one-round capture","  \/\/ So you need to specify the capturing angle when initializing","  let panoramaCaptureView = PanoramaCaptureView(targetCaptureAngle: targetCaptureAngle)","","  override func viewDidLoad() {","    super.viewDidLoad()","","    panoramaCaptureView.delegate = self","    view.addSubview(panoramaCaptureView)","  }","}"]},{"inlineContent":[{"text":"After capturing, the panorama will start processing, and ","type":"text"},{"code":"PanoramaCaptureViewDelegate.willStartProcessing","type":"codeVoice"},{"type":"text","text":" will be called:"}],"type":"paragraph"},{"syntax":"swift","code":["extension PanoramaCaptureVC: PanoramaCaptureViewDelegate {","  func willStartProcessing() {","    \/\/ You could start a progress hud here","  }","}"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"After processing, the result will be notified through "},{"type":"codeVoice","code":"PanoramaCaptureViewDelegate.didFinishProcessing"},{"text":":","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["extension PanoramaCaptureVC: PanoramaCaptureViewDelegate {","","  func didFinishProcessing(result: Result<UIImage, Error>) {","    switch result {","    case let .success(image):","      \/\/ If successed, you could use the PanoramaView to preview the result","    case let .failure(error):","      \/\/ If failed, you could reset the panorama capture view and start a new session","      panoramaCaptureView.reset()","    }","  }","}"]},{"type":"heading","text":"Preview","level":2,"anchor":"Preview"},{"inlineContent":[{"type":"text","text":"And we provide a panorama viewer class here that you could use:"}],"type":"paragraph"},{"syntax":"swift","code":["let panoramaView = PanoramaView(panoImage: ...)"],"type":"codeListing"},{"inlineContent":[{"type":"text","text":"Since the panorama we captured only have one round, with limited floors and ceiling views. So we might want to limit the vertical viewing angle of camera:"}],"type":"paragraph"},{"code":["panoramaView.minimumVerticalAngle = targetCaptureAngle - 20","panoramaView.maximumVerticalAngle = targetCaptureAngle + 20"],"syntax":"swift","type":"codeListing"}]}],"hierarchy":{"paths":[["doc:\/\/com.kiriengine.Panorama\/documentation\/Panorama"]]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.kiriengine.Panorama\/documentation\/Panorama\/Capture-and-preview"},"sections":[],"schemaVersion":{"patch":0,"major":0,"minor":3},"kind":"article","abstract":[{"text":"A tutorial that guide you how to use the Panorama module.","type":"text"}],"references":{"doc://com.kiriengine.Panorama/documentation/Panorama":{"url":"\/documentation\/panorama","kind":"symbol","identifier":"doc:\/\/com.kiriengine.Panorama\/documentation\/Panorama","type":"topic","title":"Panorama","role":"collection","abstract":[{"text":"This page contains RoomScanSDK and its related projects documentation.","type":"text"}]}}}